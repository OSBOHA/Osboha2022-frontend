{"version":3,"file":"js/9789.d609553d.js","mappings":"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","sources":["webpack://Osboha180/./src/API/services/thesis.service.js","webpack://Osboha180/./src/views/Book/BookDetails.vue","webpack://Osboha180/./src/views/Book/BookDetails.vue?a0f9"],"sourcesContent":["import { api } from \"../Intercepter\";\nimport { handleError } from \"vue\";\n\nclass ThesisService {\n  async getThesisById(thesis_id) {\n    try {\n      const thesis = await api.get(`/theses/${thesis_id}`);\n      return thesis.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getBookThesis(book_id, thesis_id) {\n    try {\n      const thesis = await api.get(\n        `/theses/book/${book_id}/thesis/${thesis_id}`\n      );\n      return thesis.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getThesesByBookId(id, page, user_id = \"\") {\n    try {\n      const theses = await api.get(\n        `/theses/book/${id}/user/${user_id}?page=${page}`\n      );\n      return theses.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getThesisByUser(id, page) {\n    try {\n      const theses = await api.get(`/theses/user/${id}?page=${page}`);\n      return theses.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getThesisByWeek(id) {\n    try {\n      const thesis = await api.get(`/theses/week/${id}`);\n      return thesis.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n}\n\nexport default new ThesisService();\n","<template>\r\n  <main>\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card card-block card-stretch card-height blog blog-detail\">\r\n          <div class=\"card-body\">\r\n            <div class=\"image-block text-center mt-3\">\r\n              <img\r\n                :src=\"resolve_img_url(book.book?.media?.path ?? '')\"\r\n                class=\"img-fluid rounded w-25\"\r\n                alt=\"blog-img\"\r\n              />\r\n            </div>\r\n            <div class=\"blog-description mt-3 text-center\">\r\n              <h2 class=\"mb-3 pb-3 border-bottom text-center\">\r\n                {{ book.book?.name }}\r\n              </h2>\r\n              <div\r\n                class=\"blog-meta d-flex align-items-center mb-3 position-right-side flex-wrap\"\r\n              >\r\n                <div class=\"date me-4 d-flex align-items-center\">\r\n                  <i class=\"material-symbols-outlined pe-2 md-18 text-primary\"\r\n                    >calendar_month</i\r\n                  >تاريخ الاضافة {{ formattedDate }}\r\n                </div>\r\n                <div class=\"like me-4 d-flex align-items-center\">\r\n                  <i class=\"material-symbols-outlined pe-2 md-18 text-primary\">\r\n                    star\r\n                  </i>\r\n                  {{ book.rate }}% تقييم\r\n                </div>\r\n                <div class=\"comments me-4 d-flex align-items-center\">\r\n                  <i class=\"material-symbols-outlined pe-2 md-18 text-primary\">\r\n                    book\r\n                  </i>\r\n                  عدد الصفحات:\r\n                  {{ book.book?.end_page }}\r\n                </div>\r\n                <div class=\"comments me-4 d-flex align-items-center\">\r\n                  <i class=\"material-symbols-outlined pe-2 md-18 text-primary\">\r\n                    comment </i\r\n                  >{{ book.theses_count }} أطروحة\r\n                </div>\r\n                <div class=\"comments me-4 d-flex align-items-center\">\r\n                  <i class=\"material-symbols-outlined pe-2 md-18 text-primary\">\r\n                    mode_comment </i\r\n                  >{{ book.comments_count }} تعليق\r\n                </div>\r\n              </div>\r\n              <div class=\"text-center\">\r\n                {{ shortBriefText }}\r\n                <a class=\"load-btn\" v-on:click=\"loadMoreBriefText\" v-if=\"isMore\"\r\n                  >...قراءة المزيد</a\r\n                >\r\n                <a class=\"load-btn\" v-on:click=\"loadLessBriefText\" v-if=\"isLess\"\r\n                  >قراءة أقل</a\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-lg-12\" v-if=\"book.allow_comments\">\r\n        <div class=\"card card-block card-stretch card-height blog\">\r\n          <button\r\n            type=\"submit\"\r\n            class=\"btn btn-primary d-block w-100\"\r\n            data-bs-toggle=\"modal\"\r\n            data-bs-target=\"#modals\"\r\n          >\r\n            كتابة أطروحة\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card card-block card-stretch card-height blog user-comment\">\r\n          <div class=\"card-header d-flex justify-content-between\">\r\n            <div class=\"header-title\">\r\n              <h4 class=\"card-title\">الأطروحات</h4>\r\n            </div>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"row\" v-if=\"theses.length\">\r\n              <!-- display theses -->\r\n              <div\r\n                class=\"col-lg-12\"\r\n                v-for=\"comment in theses\"\r\n                :key=\"comment.id\"\r\n              >\r\n                <div class=\"card card-block card-stretch card-height blog\">\r\n                  <div class=\"card-body\">\r\n                    <Comment\r\n                      :allowComment=\"book.allow_comments\"\r\n                      :comment=\"comment\"\r\n                      :totalThesisPages=\"\r\n                        comment.thesis\r\n                          ? comment.thesis.end_page -\r\n                              comment.thesis.start_page >\r\n                            0\r\n                            ? comment.thesis.end_page -\r\n                              comment.thesis.start_page +\r\n                              1\r\n                            : 0\r\n                          : 0\r\n                      \"\r\n                      @addComment=\"addComment\"\r\n                      @editComment=\"editComment\"\r\n                      @reactToComment=\"reactToComment\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <modal\r\n                  :id=\"`editThesis-${comment.id}`\"\r\n                  ref=\"editThesisRef\"\r\n                  dialogClass=\"modal-dialog-centered modal-dialog-scrollable\"\r\n                  tabindex=\"-1\"\r\n                  aria-labelledby=\"editThesis\"\r\n                  :aria-hidden=\"false\"\r\n                >\r\n                  <model-header>\r\n                    <h5 class=\"modal-title\" id=\"modalsLabel\">تعديل الأطروحة</h5>\r\n                    <a\r\n                      href=\"javascript:void(0);\"\r\n                      class=\"lh-1\"\r\n                      data-bs-dismiss=\"modal\"\r\n                      ref=\"editCloseBtn\"\r\n                    >\r\n                      <span class=\"material-symbols-outlined\">close</span>\r\n                    </a>\r\n                  </model-header>\r\n                  <model-body>\r\n                    <createThesis :book=\"book.book\" :thesisToEdit=\"comment\" />\r\n                  </model-body>\r\n                </modal>\r\n              </div>\r\n\r\n              <div class=\"col-sm-12 text-center\" v-if=\"loading\">\r\n                <img\r\n                  :src=\"\r\n                    require('@/assets/images/page-img/page-load-loader.gif')\r\n                  \"\r\n                  alt=\"loader\"\r\n                  style=\"height: 100px\"\r\n                />\r\n              </div>\r\n\r\n              <!-- <div class=\"col-lg-12\">\r\n                <div class=\"card card-block card-stretch card-height blog\">\r\n                  <CreateComment :type=\"'comment'\" @addComment=\"addComment\" />\r\n                </div>\r\n              </div> -->\r\n              <!--Load more thesis-->\r\n              <div class=\"col-lg-12\">\r\n                <div class=\"card card-block card-stretch card-height blog\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-primary d-block w-100\"\r\n                    v-if=\"hasMoreTheses\"\r\n                    @click=\"loadMoreTheses\"\r\n                    :disabled=\"loading\"\r\n                  >\r\n                    تحميل المزيد\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\" v-else>\r\n              <div class=\"col-lg-12\">\r\n                <div class=\"text-center d-flex align-items-center\">\r\n                  <span class=\"material-symbols-outlined\">\r\n                    comments_disabled\r\n                  </span>\r\n                  <h5 class=\"ms-2\" v-if=\"$route.params.thesis_id\">\r\n                    لم يتم العثور على هذه الأطروحة\r\n                  </h5>\r\n                  <h5 class=\"ms-2\" v-else>\r\n                    لا يوجد أطروحات\r\n                    <span v-if=\"$route.params.user_id\">لهذا السفير</span>\r\n                  </h5>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <modal\r\n      id=\"modals\"\r\n      ref=\"modals\"\r\n      dialogClass=\"modal-dialog-centered modal-dialog-scrollable\"\r\n      tabindex=\"-1\"\r\n      aria-labelledby=\"modalsLabel\"\r\n      :aria-hidden=\"false\"\r\n    >\r\n      <model-header>\r\n        <h5 class=\"modal-title\" id=\"modalsLabel\">\r\n          {{ book.book?.name }} || أطروحة جديدة\r\n        </h5>\r\n        <a\r\n          href=\"javascript:void(0);\"\r\n          class=\"lh-1\"\r\n          data-bs-dismiss=\"modal\"\r\n          ref=\"closeBtn\"\r\n        >\r\n          <span class=\"material-symbols-outlined\">close</span>\r\n        </a>\r\n      </model-header>\r\n      <model-body>\r\n        <createThesis\r\n          :book=\"book.book\"\r\n          :lastThesis=\"book.last_thesis\"\r\n          @closeModel=\"closeModel\"\r\n          @addThesis=\"addThesis\"\r\n        />\r\n      </model-body>\r\n    </modal>\r\n  </main>\r\n</template>\r\n<script>\r\nimport Comment from \"@/components/comment/Comment.vue\";\r\nimport CreateComment from \"@/components/comment/CreateComment.vue\";\r\nimport createThesis from \"@/components/book/theses/create.vue\";\r\nimport bookService from \"@/API/services/book.service\";\r\nimport thesisService from \"@/API/services/thesis.service\";\r\nimport moment from \"moment\";\r\nimport helper from \"@/utilities/helper\";\r\n\r\nexport default {\r\n  name: \"BookDetails\",\r\n  components: {\r\n    Comment,\r\n    createThesis,\r\n    // CreateComment,\r\n  },\r\n  provide() {\r\n    return {\r\n      deleteComment: this.deleteComment,\r\n    };\r\n  },\r\n  // props: [\"id\"],\r\n  async created() {\r\n    await this.getBook(this.$route.params.book_id);\r\n    await this.getTheses(this.page);\r\n\r\n    console.log(\"bookDetails - book\", this.book);\r\n  },\r\n  data() {\r\n    return {\r\n      theses: [],\r\n      book: {},\r\n      fullBriefText: \"\",\r\n      shortBriefText: \"\",\r\n      page: 1,\r\n      totalTheses: 0,\r\n      loading: false,\r\n    };\r\n  },\r\n  methods: {\r\n    async getBook(id) {\r\n      try {\r\n        const response = await bookService.getById(id);\r\n        //check if response is success\r\n        if (response.statusCode === 200) {\r\n          // console.log('success', response)\r\n          this.book = response.data;\r\n          this.fullBriefText = this.book.book?.brief;\r\n          this.shortBriefText = this.fullBriefText?.slice(0, 200);\r\n        } else {\r\n          //handle error\r\n          console.log(\"error: \", response.data);\r\n        }\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n      // const response = await bookService.getById(id);\r\n      // //check if response is success\r\n      // if (response.statusCode === 200) {\r\n      //   // console.log('success', response)\r\n      //   this.book = response.data;\r\n      //   this.fullBriefText = this.book.book?.brief;\r\n      //   this.shortBriefText = this.fullBriefText?.slice(0, 200);\r\n      // } else {\r\n      //   //handle error\r\n      //   console.log(\"error: \", response);\r\n      // }\r\n    },\r\n    loadMoreBriefText() {\r\n      this.shortBriefText = this.fullBriefText;\r\n    },\r\n    loadLessBriefText() {\r\n      this.shortBriefText = this.fullBriefText?.slice(0, 200);\r\n    },\r\n    resolve_img_url: function (path) {\r\n      return path ? path : require(\"@/assets/images/main/200x200-book.png\");\r\n    },\r\n    async getTheses(page) {\r\n      if (this.loading) return;\r\n\r\n      this.loading = true;\r\n      try {\r\n        let response;\r\n        if (this.$route.params.thesis_id) {\r\n          response = await thesisService.getBookThesis(\r\n            this.$route.params.book_id,\r\n            this.$route.params.thesis_id\r\n          );\r\n        } else {\r\n          response = await thesisService.getThesesByBookId(\r\n            this.$route.params.book_id,\r\n            page,\r\n            this.$route.params.user_id ?? \"\"\r\n          );\r\n        }\r\n\r\n        if (response.statusCode === 200) {\r\n          this.theses.push(...response.data.theses);\r\n          this.totalTheses = response.data.total;\r\n        } else {\r\n          helper.toggleToast(\r\n            \"حدث خطأ أثناء تحميل البيانات, الرجاء المحاولة مرة أخرى\",\r\n            \"error\"\r\n          );\r\n        }\r\n      } catch (e) {\r\n        helper.toggleToast(\r\n          \"حدث خطأ أثناء تحميل البيانات, الرجاء المحاولة مرة أخرى\",\r\n          \"error\"\r\n        );\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async loadMoreTheses() {\r\n      this.page++;\r\n      await this.getTheses(this.page);\r\n    },\r\n    async closeModel() {\r\n      this.$refs.closeBtn.click();\r\n    },\r\n\r\n    addThesis(thesis) {\r\n      this.theses.unshift(thesis);\r\n      this.book.theses_count++;\r\n      this.book.comments_count =\r\n        this.book.comments_count + thesis.replies.length + 1;\r\n      this.totalTheses++;\r\n      this.book.book.userBooks = thesis.user.userBooks;\r\n      this.book.last_thesis = thesis.thesis;\r\n\r\n      if (\r\n        this.book.book.userBooks.length > 0 &&\r\n        this.book.book.userBooks[0].status === \"finished\"\r\n      ) {\r\n        helper.toggleToast(\"تهانينا, لقد أنهيت الكتاب\", \"success\");\r\n      }\r\n    },\r\n    findComment(theses, comment_id) {\r\n      for (let i = 0; i < theses.length; i++) {\r\n        if (theses[i].id === comment_id) {\r\n          return theses[i];\r\n        } else if (theses[i].replies.length > 0) {\r\n          const comment = this.findComment(theses[i].replies, comment_id);\r\n          if (comment) {\r\n            return comment;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    addComment(reply, comment_id) {\r\n      if (!comment_id) {\r\n        this.theses.push(reply);\r\n        this.book.comments_count++;\r\n        this.totalTheses++;\r\n        return;\r\n      } else {\r\n        const comment = this.findComment(this.theses, comment_id);\r\n        comment.replies.push(reply);\r\n        this.book.comments_count++;\r\n        console.log(\"[added comment at book]\", comment);\r\n      }\r\n    },\r\n    deleteComment(comment_id) {\r\n      for (let i = 0; i < this.theses.length; i++) {\r\n        if (this.theses[i].id === comment_id) {\r\n          this.theses.splice(i, 1);\r\n          this.book.comments_count--;\r\n          this.totalTheses--;\r\n          return;\r\n        } else if (this.theses[i].replies.length > 0) {\r\n          for (let j = 0; j < this.theses[i].replies.length; j++) {\r\n            if (this.theses[i].replies[j].id === comment_id) {\r\n              this.theses[i].replies.splice(j, 1);\r\n              this.book.comments_count--;\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    editComment(comment) {\r\n      let commentToEdit = this.findComment(this.theses, comment.id);\r\n      commentToEdit.body = comment.body;\r\n      commentToEdit.media = comment.media;\r\n    },\r\n    reactToComment(comment_id, status) {\r\n      let comment = this.findComment(this.theses, comment_id);\r\n      if (status) {\r\n        comment.reactions_count++;\r\n        comment.reacted_by_user = true;\r\n      } else {\r\n        comment.reactions_count--;\r\n        comment.reacted_by_user = false;\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    formattedDate() {\r\n      return moment(this.book?.created_at).format(\"YYYY-MM-DD\");\r\n    },\r\n    isMore() {\r\n      return this.shortBriefText?.length < this.fullBriefText?.length;\r\n    },\r\n    isLess() {\r\n      return (\r\n        this.shortBriefText?.length >= this.fullBriefText?.length &&\r\n        this.fullBriefText?.length > 200\r\n      );\r\n    },\r\n    hasMoreTheses() {\r\n      return (\r\n        this.theses.length < this.totalTheses &&\r\n        this.totalTheses > 0 &&\r\n        this.theses.length > 0\r\n      );\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.load-btn {\r\n  color: #216d2e;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import { render } from \"./BookDetails.vue?vue&type=template&id=7795eb98\"\nimport script from \"./BookDetails.vue?vue&type=script&lang=js\"\nexport * from \"./BookDetails.vue?vue&type=script&lang=js\"\n\nimport \"./BookDetails.vue?vue&type=style&index=0&id=7795eb98&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\someO\\\\Desktop\\\\vue\\\\osboha2022\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["ThesisService","thesis_id","thesis","api","data","error","handleError","book_id","id","page","user_id","theses","class","_createElementVNode","type","_hoisted_22","_hoisted_32","href","ref","_hoisted_48","_createElementBlock","src","$options","$data","book","media","path","alt","_toDisplayString","name","_hoisted_11","_hoisted_13","rate","_hoisted_15","end_page","_hoisted_17","theses_count","_hoisted_19","comments_count","onClick","allow_comments","_hoisted_23","_hoisted_26","length","_Fragment","_renderList","comment","key","_createVNode","_component_Comment","allowComment","totalThesisPages","start_page","onAddComment","onEditComment","onReactToComment","_component_modal","dialogClass","tabindex","_component_model_header","_hoisted_31","_component_model_body","_component_createThesis","thesisToEdit","require","style","disabled","_hoisted_38","_hoisted_42","_ctx","params","_hoisted_45","_hoisted_49","lastThesis","last_thesis","onCloseModel","onAddThesis","components","Comment","createThesis","provide","deleteComment","this","async","getBook","$route","getTheses","console","log","fullBriefText","shortBriefText","totalTheses","loading","methods","response","bookService","statusCode","brief","slice","e","loadMoreBriefText","loadLessBriefText","resolve_img_url","thesisService","push","total","helper","$refs","closeBtn","click","addThesis","unshift","replies","userBooks","user","status","findComment","comment_id","i","addComment","reply","splice","j","editComment","commentToEdit","body","reactToComment","reactions_count","reacted_by_user","computed","formattedDate","moment","created_at","format","isMore","isLess","hasMoreTheses","__exports__","render"],"sourceRoot":""}