(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[6640],{20425:function(e){!function(t,n){e.exports=n()}(0,(function(){var e="__v-click-outside",t="undefined"!=typeof window,n="undefined"!=typeof navigator,i=t&&("ontouchstart"in window||n&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],r=function(e){var t=e.event,n=e.handler;(0,e.middleware)(t)&&n(t)},a=function(t,n){var a=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||i,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe),capture:Boolean(e.capture)}}(n.value),s=a.handler,o=a.middleware,l=a.detectIframe,c=a.capture;if(a.isActive){if(t[e]=a.events.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(e){var t=e.el,n=e.event,i=e.handler,a=e.middleware,s=n.path||n.composedPath&&n.composedPath();(s?s.indexOf(t)<0:!t.contains(n.target))&&r({event:n,handler:i,middleware:a})}({el:t,event:e,handler:s,middleware:o})},capture:c}})),l){var d={event:"blur",srcTarget:window,handler:function(e){return function(e){var t=e.el,n=e.event,i=e.handler,a=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!t.contains(e)&&r({event:n,handler:i,middleware:a})}),0)}({el:t,event:e,handler:s,middleware:o})},capture:c};t[e]=[].concat(t[e],[d])}t[e].forEach((function(n){var i=n.event,r=n.srcTarget,a=n.handler;return setTimeout((function(){t[e]&&r.addEventListener(i,a,c)}),0)}))}},s=function(t){(t[e]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,e.capture)})),delete t[e]},o=t?{beforeMount:a,updated:function(e,t){var n=t.value,i=t.oldValue;JSON.stringify(n)!==JSON.stringify(i)&&(s(e),a(e,{value:n}))},unmounted:s}:{};return{install:function(e){e.directive("click-outside",o)},directive:o}}))},96444:function(e,t,n){"use strict";var i=n(66252),r=n(24150);class a{async getAllFriends(e){try{const t=await r.hi.get(`friends/user/${e}`);return t.data.data}catch(t){(0,i.S3)(t)}}async getFriendsRequests(){try{const e=await r.hi.get("/friends/un-accepted");return e.data.data}catch(e){(0,i.S3)(e)}}async create(e){try{return await r.hi.post("/friends/create",{friend_id:e})}catch(t){(0,i.S3)(t)}}async getFriendshipById(e){try{const t=await r.hi.post("/friends/show",{friendship_id:e});return t.data}catch(t){(0,i.S3)(t)}}async accept(e){try{const t=await r.hi.get(`/friends/accept/${e}`);return t.data}catch(t){(0,i.S3)(t)}}async delete(e,t){const n=new FormData;n.append("user_id",e),n.append("friend_id",t);try{const e=await r.hi.post("/friends/delete",n);return e.data}catch(a){(0,i.S3)(a)}}}t["Z"]=new a},2933:function(e,t,n){"use strict";var i=n(24150);class r{resolve_porfile_img(e,t,n){let r=e+"_"+t;const a=`${i.v2}/profile-image/${n}/${r}`;return a}}t["Z"]=new r},26640:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var i=n(66252),r=n(3577),a=n(76560);const s={class:"row"},o=(0,i._)("h4",{class:"card-title"},"قائمة الأصدقاء",-1),l={key:0,class:"request-list list-inline m-0 p-0"},c={class:"user-img img-fluid flex-shrink-0"},d=["src","title"],u=["src","title"],m={class:"flex-grow-1 ms-3"},f={class:"d-flex justify-content-end flex-grow-1 ms-3"},h=["onClick"],p=(0,i._)("a",{class:"dropdown-item d-flex align-items-center"},[(0,i._)("span",{class:"material-symbols-outlined me-2 md-18"}," person "),(0,i.Uk)(" الملف الشخصي ")],-1),g=["onClick"],_=(0,i._)("span",{class:"material-symbols-outlined me-2 md-18"}," person_remove ",-1),w=["onClick"],v=(0,i._)("span",{class:"material-symbols-outlined me-2 md-18"}," person_remove ",-1),y=["onClick"],k=(0,i._)("span",{class:"material-symbols-outlined me-2 md-18"}," group_add ",-1),b={key:0,class:"d-block text-center mb-0 pb-0"},x={key:1,class:"col-sm-12"},C=(0,i._)("div",{class:"iq-card-body p-0"},[(0,i._)("div",{class:"image-block text-center"},[(0,i._)("img",{src:a,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,i._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد أصدقاء")],-1);function O(e,t,n,a,O,F){const A=(0,i.up)("router-link"),L=(0,i.up)("iq-card"),D=(0,i.Q2)("click-outside");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(L,null,{headerTitle:(0,i.w5)((()=>[o])),body:(0,i.w5)((()=>[F.friendsLoaded.length>0?(0,i.wy)(((0,i.wg)(),(0,i.iD)("ul",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(F.friendsLoaded,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{class:"d-flex align-items-center justify-content-between flex-wrap",key:t},[(0,i._)("div",c,[e.profile.profile_picture?((0,i.wg)(),(0,i.iD)("img",{key:0,src:F.resolve_porfile_img("60x60",e.profile.profile_picture,e.profile.id),alt:"profile-img",class:"rounded-circle avatar-40",title:e.name},null,8,d)):((0,i.wg)(),(0,i.iD)("img",{key:1,src:F.resolve_porfile_img("60x60","ananimous_"+e.gender+".png","ananimous"),alt:"profile-img",title:e.name,class:"rounded-circle avatar-40"},null,8,u))]),(0,i._)("div",m,[(0,i._)("h5",null,(0,r.zw)(e.name),1)]),(0,i._)("div",f,[(0,i._)("span",{role:"button",onClick:e=>F.showList(t),class:"material-symbols-outlined"}," more_horiz ",8,h),(0,i._)("div",{class:(0,r.C_)("dropdown-menu dropdown-menu-right "+(O.controlList[t]?"show":"")),"aria-labelledby":"dropdownMenuButton"},[(0,i.Wm)(A,{to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,i.w5)((()=>[p])),_:2},1032,["to"]),O.user_id==F.auth.id?((0,i.wg)(),(0,i.iD)("a",{key:0,class:"dropdown-item d-flex align-items-center",onClick:t=>F.deleteFriendship(F.auth.id,e.id)},[_,(0,i.Uk)(" الغاء الصداقة ")],8,g)):F.checkNotFriendsOfAuth(e.id)?((0,i.wg)(),(0,i.iD)("a",{key:1,class:"dropdown-item d-flex align-items-center",onClick:t=>F.createFriendship(e.id)},[v,(0,i.Uk)(" الغاء طلب الصداقة ")],8,w)):F.checkFriendsOfAuth(e.id)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",{key:2,class:"dropdown-item d-flex align-items-center",onClick:t=>F.createFriendship(e.id)},[k,(0,i.Uk)(" اضافة ")],8,y))],2)])])))),128)),O.friends.length>O.length?((0,i.wg)(),(0,i.iD)("li",b,[(0,i._)("a",{class:"me-3 btn",role:"button",onClick:t[0]||(t[0]=e=>F.loadMore())},"عرض المزيد")])):(0,i.kq)("",!0)])),[[D,F.onClickOutside]]):((0,i.wg)(),(0,i.iD)("div",x,[(0,i.Wm)(L,{class:"iq-card"},{default:(0,i.w5)((()=>[C])),_:1})]))])),_:1})])}var F=n(96444),A=n(20425),L=n.n(A),D=n(2933),T={name:"FriendList",async created(){const e=await F.Z.getAllFriends(this.user_id);this.friends=e.allFriends,this.friendsOfAuth=e.friendsOfAuth,this.notFriendsOfAuth=e.notFriendsOfAuth},directives:{clickOutside:L().directive},data(){return{controlList:[],friends:[],friendsOfAuth:[],notFriendsOfAuth:[],length:10,user_id:this.$route.params.user_id}},methods:{resolve_porfile_img(e,t,n){return D.Z.resolve_porfile_img(e,t,n)},showList(e){this.controlList.fill(!1),this.controlList[e]=!0},onClickOutside(){this.controlList.fill(!1)},deleteFriendship(e,t){const n=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});n.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((i=>{i.isConfirmed&&F.Z["delete"](e,t).then((e=>{n.fire({title:"تم الحذف",text:"تم حذف طلب الصداقة",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),setTimeout((function(){location.reload(!0)}),2e3)})).catch((e=>{console.log(e)}))}))},async createFriendship(e){try{await F.Z.create(e);this.notFriendsOfAuth.push(e);const t=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg"},buttonsStyling:!1});t.fire({title:"تم الارسال",text:"تم ارسال طلب الصداقة",icon:"success",confirmButtonText:"حسنا",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}})}catch(t){console.log(t)}},loadMore(){this.length>this.friends.length||(this.length=this.length+10)},checkFriendsOfAuth(e){return this.friendsOfAuth.includes(e)},checkNotFriendsOfAuth(e){return this.notFriendsOfAuth.includes(e)}},computed:{friendsLoaded(){return this.friends.slice(0,this.length)},auth(){return this.$store.getters.getUser}}},B=n(83744);const S=(0,B.Z)(T,[["render",O]]);var $=S},76560:function(e,t,n){"use strict";e.exports=n.p+"img/no-friends.2bab3c44.png"}}]);
//# sourceMappingURL=6640.be6ed57e.js.map