(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[5956],{20425:function(e){!function(t,a){e.exports=a()}(0,(function(){var e="__v-click-outside",t="undefined"!=typeof window,a="undefined"!=typeof navigator,r=t&&("ontouchstart"in window||a&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],n=function(e){var t=e.event,a=e.handler;(0,e.middleware)(t)&&a(t)},s=function(t,a){var s=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||r,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe),capture:Boolean(e.capture)}}(a.value),i=s.handler,c=s.middleware,o=s.detectIframe,d=s.capture;if(s.isActive){if(t[e]=s.events.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(e){var t=e.el,a=e.event,r=e.handler,s=e.middleware,i=a.path||a.composedPath&&a.composedPath();(i?i.indexOf(t)<0:!t.contains(a.target))&&n({event:a,handler:r,middleware:s})}({el:t,event:e,handler:i,middleware:c})},capture:d}})),o){var u={event:"blur",srcTarget:window,handler:function(e){return function(e){var t=e.el,a=e.event,r=e.handler,s=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!t.contains(e)&&n({event:a,handler:r,middleware:s})}),0)}({el:t,event:e,handler:i,middleware:c})},capture:d};t[e]=[].concat(t[e],[u])}t[e].forEach((function(a){var r=a.event,n=a.srcTarget,s=a.handler;return setTimeout((function(){t[e]&&n.addEventListener(r,s,d)}),0)}))}},i=function(t){(t[e]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,e.capture)})),delete t[e]},c=t?{beforeMount:s,updated:function(e,t){var a=t.value,r=t.oldValue;JSON.stringify(a)!==JSON.stringify(r)&&(i(e),s(e,{value:a}))},unmounted:i}:{};return{install:function(e){e.directive("click-outside",c)},directive:c}}))},96444:function(e,t,a){"use strict";var r=a(66252),n=a(24150);class s{async getAllFriends(e){try{const t=await n.hi.get(`friends/user/${e}`);return t.data.data}catch(t){(0,r.S3)(t)}}async getFriendsRequests(){try{const e=await n.hi.get("/friends/un-accepted");return e.data.data}catch(e){(0,r.S3)(e)}}async create(e){try{return await n.hi.post("/friends/create",{friend_id:e})}catch(t){(0,r.S3)(t)}}async getFriendshipById(e){try{const t=await n.hi.post("/friends/show",{friendship_id:e});return t.data}catch(t){(0,r.S3)(t)}}async accept(e){try{const t=await n.hi.get(`/friends/accept/${e}`);return t.data}catch(t){(0,r.S3)(t)}}async delete(e,t){const a=new FormData;a.append("user_id",e),a.append("friend_id",t);try{const e=await n.hi.post("/friends/delete",a);return e.data}catch(s){(0,r.S3)(s)}}}t["Z"]=new s},22658:function(e,t,a){"use strict";var r=a(66252),n=a(24150),s=a(79940);class i{async createGroup(e){try{const t=await n.hi.post("/group/create",e,{headers:{"Content-type":"multipart/form-data"}});return t.data.data}catch(t){(0,r.S3)(t)}}async getAll(){try{const e=await n.hi.get("/group");return await e.data}catch(e){return e}}async getById(e){try{const t=await n.hi.get(`group/show/${e}`);return t.data.data}catch(t){return t}}async getBooks(e){try{const t=await n.hi.get(`group/books/${e}`);return t.data.data}catch(t){(0,r.S3)(t)}}async getAllGroupExceptions(e){try{const t=await n.hi.get(`group/group-exceptions/${e}`);return t.data.data}catch(t){return t}}async exceptionsFilter(e,t){try{const a=await n.hi.get(`group/exceptions-filter/${e}/${t}`);return a.data.data}catch(a){return a}}async BasicMarksView(e){try{const t=await n.hi.get(`group/basic-mark-view/${e}`);return t.data.data}catch(t){return t}}async AllAchievements(e,t){try{const a=await n.hi.get(`group/all-achievements/${e}/${t}`);return a.data.data}catch(a){return a}}async AchievementAsPages(e,t){try{const a=await n.hi.get(`group/achievement-as-pages/${e}/${t}`);return a.data.data}catch(a){return a}}async searchForAmbassadorAchievement(e,t,a){try{const r=await n.hi.get(`group/search-for-ambassador-achievement/${e}/${t}/${a}`);return r.data.data}catch(r){return r}}async searchForAmbassador(e,t){try{const a=await n.hi.get(`group/search-for-ambassador/${e}/${t}`);return a.data.data}catch(a){return a}}async createLeaderRequest(e){try{const t=await n.hi.post("/group/create-leader-request",e,{headers:{"Content-type":"multipart/form-data"}});return t.data.data}catch(t){return t}}async lastLeaderRequest(e){try{const t=await n.hi.get(`group/last-leader-request/${e}`);return t.data.data}catch(t){return t}}async deleteById(e){try{return await n.hi["delete"](`/group/delete/${e}`)}catch(t){return t}}async update(e){}async getGroupByType(e){try{const t=await n.hi.post("/group/GroupByType",{type_id:e});return t.data}catch(t){return t}}async userGroups(){try{const e=await n.hi.get("/group/user-groups");return e.data.data}catch(e){return e}}async statistics(e){try{const t=await n.hi.get(`group/statistics/${e}`);return t.data.data}catch(t){(0,s.F)(t,"statistics")}}async thesesAndScreensByWeek(e,t){try{const a=await n.hi.get(`group/theses-and-screens-by-week/${e}/${t}`);return a.data.data}catch(a){(0,r.S3)(a)}}async monthAchievement(e,t){try{const a=await n.hi.get(`group/month-achievement/${e}/${t}`);return a.data.data}catch(a){(0,r.S3)(a)}}}t["Z"]=new i},2933:function(e,t,a){"use strict";var r=a(24150);class n{resolve_porfile_img(e,t,a){let n=e+"_"+t;const s=`${r.v2}/profile-image/${a}/${n}`;return s}}t["Z"]=new n},94918:function(e,t,a){"use strict";var r=a(79940),n=a(24150);class s{constructor(){this.prefix="user-group"}async usersByGroupId(e){try{const t=await n.hi.get(`${this.prefix}/users/${e}`);return t.data.data}catch(t){return t}}async AddMember(e){try{const t=await n.hi.post(`${this.prefix}/add-member`,e,{headers:{"Content-type":"multipart/form-data"}});return t.data.data}catch(t){(0,r.F)(t,"UserGroupService.AddMember")}}}t["Z"]=new s},79940:function(e,t,a){"use strict";a.d(t,{F:function(){return n}});var r=a(1120);function n(e,t=""){throw console.log(`[ERROR] ${t} =>`,e.response.data),404===e.response.data.statusCode?r.Z.push({name:"NotFound"}):403===e.response.data.statusCode&&r.Z.push({name:"NotAuthorized"}),e}},25956:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var r=a(66252),n=a(3577),s=a(76560);const i={class:"row"},c=(0,r._)("h4",{class:"card-title"},"قائمة الأعضاء",-1),o={key:0,class:"request-list list-inline m-0 p-0"},d={class:"user-img img-fluid flex-shrink-0"},u=["src","title"],l=["src","title"],h={class:"flex-grow-1 ms-3"},p={class:"rounded-pill badge lh-1 bg-primary"},m={class:"d-flex justify-content-end flex-grow-1 ms-3"},g=["onClick"],f=(0,r._)("a",{class:"dropdown-item d-flex align-items-center"},[(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," person "),(0,r.Uk)(" الملف الشخصي ")],-1),y=(0,r._)("a",{class:"dropdown-item d-flex align-items-center"},[(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," forum "),(0,r.Uk)(" مراسلة ")],-1),w=["onClick"],v=(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," group_add ",-1),_={key:0,class:"d-block text-center mb-0 pb-0"},b={key:1,class:"col-sm-12"},k=(0,r._)("div",{class:"iq-card-body p-0"},[(0,r._)("div",{class:"image-block text-center"},[(0,r._)("img",{src:s,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,r._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد أعضاء")],-1);function $(e,t,a,s,$,x){const A=(0,r.up)("router-link"),F=(0,r.up)("iq-card"),L=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(F,null,{headerTitle:(0,r.w5)((()=>[c])),body:(0,r.w5)((()=>[x.usersLoaded?.length>0?((0,r.wg)(),(0,r.iD)("ul",o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(x.usersLoaded,((e,t)=>((0,r.wg)(),(0,r.iD)("li",{class:"d-flex align-items-center justify-content-between flex-wrap",key:t},[(0,r._)("div",d,[e.user_profile.profile_picture?((0,r.wg)(),(0,r.iD)("img",{key:0,src:x.resolve_porfile_img("60x60",e.user_profile.profile_picture,e.user_profile.id),alt:"profile-img",class:"rounded-circle avatar-40",title:e.name},null,8,u)):((0,r.wg)(),(0,r.iD)("img",{key:1,src:x.resolve_porfile_img("60x60","ananimous_"+e.gender+".png","ananimous"),alt:"profile-img",title:e.name,class:"rounded-circle avatar-40"},null,8,l))]),(0,r._)("div",h,[(0,r.Wm)(A,{to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,r.w5)((()=>[(0,r._)("h5",null,(0,n.zw)(e.name),1)])),_:2},1032,["to"]),(0,r._)("span",p,(0,n.zw)(e.pivot.user_type),1)]),(0,r._)("div",m,[(0,r._)("span",{role:"button",onClick:e=>x.showList(t),class:"material-symbols-outlined"}," more_horiz ",8,g),(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{class:(0,n.C_)("dropdown-menu dropdown-menu-right "+($.controlList[t]?"show":"")),"aria-labelledby":"dropdownMenuButton"},[(0,r.Wm)(A,{to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,r.w5)((()=>[f])),_:2},1032,["to"]),y,(0,r._)("a",{class:"dropdown-item d-flex align-items-center",onClick:t=>x.createFriendship(e.id)},[v,(0,r.Uk)(" اضافة ")],8,w)],2)),[[L,x.hideList]])])])))),128)),$.users?.length>$.length?((0,r.wg)(),(0,r.iD)("li",_,[(0,r._)("a",{class:"me-3 btn",role:"button",onClick:t[0]||(t[0]=e=>x.loadMore())},"عرض المزيد")])):(0,r.kq)("",!0)])):((0,r.wg)(),(0,r.iD)("div",b,[(0,r.Wm)(F,{class:"iq-card"},{default:(0,r.w5)((()=>[k])),_:1})]))])),_:1})])}var x=a(96444),A=a(94918),F=a(20425),L=a.n(F),S=a(2933),B=a(22658),C={name:"FriendList",directives:{clickOutside:L().directive},async created(){const e=await A.Z.usersByGroupId(this.$route.params.group_id);this.users=e.users},data(){return{controlList:[],users:[],length:10,ambassador_name:""}},methods:{showList(e){this.controlList.fill(!1),this.controlList[e]=!0},hideList(){this.controlList.fill(!1)},async createFriendship(e){await x.Z.create(e)},loadMore(){this.length>this.users?.length||(this.length=this.length+10)},resolve_porfile_img(e,t,a){return S.Z.resolve_porfile_img(e,t,a)},async searchForAmbassador(){const e=await B.Z.searchForAmbassador(this.ambassador_name,this.$route.params.group_id);this.users=e.users}},computed:{usersLoaded(){return this.users?.slice(0,this.length)}}},Z=a(83744);const q=(0,Z.Z)(C,[["render",$]]);var D=q},76560:function(e,t,a){"use strict";e.exports=a.p+"img/no-friends.2bab3c44.png"}}]);
//# sourceMappingURL=5956.28b576fc.js.map