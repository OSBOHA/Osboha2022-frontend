{"version":3,"file":"js/6912.1a7b1174.js","mappings":"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","sources":["webpack://Osboha180/./src/API/services/auth.service.js","webpack://Osboha180/./src/views/AuthPages/Default/AssignRole.vue","webpack://Osboha180/./src/views/AuthPages/Default/AssignRole.vue?b356"],"sourcesContent":["import { api } from \"../Intercepter\";\nimport UserInfo from \"../../Services/userInfoService\";\nimport { handleError } from \"vue\";\n\nclass AuthService {\n  async login({ username, password }) {\n    try {\n      const response = api.post(\"/auth/signin\", {\n        username,\n        password,\n      });\n\n      if (response.data.accessToken) {\n        UserInfo.setUser(response.date);\n      }\n      return response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async assignRole(formData) {\n    try {\n      const response = await api.post(\"assign-role\", formData);\n      return response.data.data;\n    } catch (error) {\n      return error.response;\n    }\n  }\n\n  logout() {\n    UserInfo.removeUser();\n  }\n\n  async register(name, gender, email, phone, password, user_type) {\n    return await api.post(\"/register\", {\n      name,\n      gender,\n      email,\n      phone,\n      password,\n      user_type,\n    });\n  }\n\n  async sendEmail() {\n    let error = null;\n    const res = await api\n      .post(\"email/verification-notification\")\n      .catch((error) => {\n        error = error.response.data.message;\n        error;\n      });\n    return { data: res.data, error };\n  }\n\n  async resetPassword(password, email, token) {\n    let resetData = new FormData();\n    resetData.append(\"password\", password);\n    resetData.append(\"email\", email);\n    resetData.append(\"token\", token);\n    try {\n      const response = await api.post(\"password/reset\", resetData);\n      return response.data;\n    } catch (error) {\n      return error.response;\n    }\n  }\n  async forgetPassword(email) {\n    try {\n      const response = await api.post(\"password/forgot-password\", {\n        email: email,\n      });\n      return response.data;\n    } catch (error) {\n      return error.response;\n    }\n  }\n  async sessionData() {\n    try {\n      const response = await api.get(\"session-data\");\n      return response.data.data;\n    } catch (error) {\n      return error.response;\n    }\n  }\n\n  async refreshToken() {\n    try {\n      const response = await api.post(\"/refresh\");\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n}\n\nexport default new AuthService();\n","<template>\n  <div class=\"col-sm-12 mt-3\">\n    <iq-card class=\"iq-card\">\n      <div\n        class=\"iq-card-header-toolbar d-flex text-center align-items-center mx-auto\"\n      >\n        <h1 class=\"text-center mt-3 mb-3\">ترقية</h1>\n      </div>\n      <div class=\"iq-card-body p-4\">\n        <div class=\"image-block text-center\">\n          <img\n            src=\"@/assets/images/main/upgrade-user.png\"\n            class=\"img-fluid rounded w-75\"\n            alt=\"blog-img\"\n          />\n        </div>\n      </div>\n      <div class=\"col-12 bg-white pt-2\">\n        <div class=\"sign-in-from\">\n          <form class=\"mt-2\" @submit.prevent=\"onSubmit()\">\n            <div class=\"form-group\">\n              <label for=\"user\">المستخدم</label>\n              <input\n                v-model=\"v$.form.user.$model\"\n                type=\"email\"\n                class=\"form-control mb-0\"\n                id=\"user\"\n                placeholder=\"ادخل بريد المستخدم\"\n              />\n              <template v-if=\"v$.form.user.$error\">\n                <small style=\"color: red\" v-if=\"v$.form.user.required.$invalid\"\n                  >البريد الالكتروني للمستخدم مطلوب</small\n                >\n                <small style=\"color: red\" v-if=\"v$.form.user.email.$invalid\"\n                  >البريد الالكتروني للمستخدم غير صحيح</small\n                >\n              </template>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"head_user\"> المسؤول عنه</label>\n              <input\n                v-model=\"v$.form.head_user.$model\"\n                type=\"email\"\n                class=\"form-control mb-0\"\n                id=\"head_user\"\n                placeholder=\"ادخل بريد المسؤول عنه\"\n              />\n              <template v-if=\"v$.form.head_user.$error\">\n                <small\n                  style=\"color: red\"\n                  v-if=\"v$.form.head_user.required.$invalid\"\n                >\n                  البريد الالكتروني للمسؤول مطلوب</small\n                >\n                <small\n                  style=\"color: red\"\n                  v-if=\"v$.form.head_user.email.$invalid\"\n                >\n                  البريد الالكتروني للمسؤول غير صحيح</small\n                >\n              </template>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"role\">الترقية</label>\n              <select\n                v-model=\"v$.form.role_id.$model\"\n                class=\"form-select\"\n                data-trigger\n                name=\"role\"\n                id=\"role\"\n              >\n                <option value=\"0\" selected>ترقية إلى</option>\n                <option\n                  v-for=\"(role, index) in roles\"\n                  :key=\"index\"\n                  :value=\"role.id\"\n                >\n                  {{ user_type[role.name] }}\n                </option>\n              </select>\n              <small style=\"color: red\" v-if=\"v$.form.role_id.$error\">\n                يرجى اختيار نوع الترقية\n              </small>\n            </div>\n\n            <div class=\"form-group text-center\" v-if=\"message\">\n              <small style=\"color: red\">\n                {{ message }}\n              </small>\n            </div>\n            <div class=\"col-sm-12 text-center\" v-if=\"loader\">\n              <p class=\"text-center\">جاري الترقية</p>\n              <img\n                src=\"@/assets/images/page-img/page-load-loader.gif\"\n                alt=\"loader\"\n                style=\"height: 100px\"\n              />\n            </div>\n            <div class=\"d-inline-block w-100\" v-else>\n              <button\n                type=\"submit\"\n                class=\"btn btn-primary float-end\"\n                :disabled=\"loader\"\n              >\n                ترقية\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </iq-card>\n  </div>\n</template>\n\n<script>\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, email, maxLength } from \"@vuelidate/validators\";\nimport { api } from \"@/API/Intercepter\";\nimport authService from \"@/API/services/auth.service\";\nconst greaterThanZero = (value) => value > 0;\n\nexport default {\n  name: \"AssignRole\",\n  setup() {\n    return { v$: useVuelidate() };\n  },\n  async created() {\n    const roles = await api.get(`get-roles/1`);\n    this.roles = roles.data.data;\n  },\n  data() {\n    return {\n      loader: false,\n      user_type: {\n        ambassador: \"سفير\",\n        leader: \"قائد\",\n        supervisor: \"مراقب\",\n        advisor: \"موجه\",\n        consultant: \"مستشار\",\n        admin: \"ادارة\",\n      },\n      form: {\n        user: \"\",\n        head_user: \"\",\n        role_id: 0,\n      },\n      roles: [],\n      message: \"\",\n    };\n  },\n  validations() {\n    return {\n      form: {\n        user: { required, email },\n        head_user: { required, email },\n        role_id: {\n          required,\n          maxValue: greaterThanZero,\n        },\n      },\n    };\n  },\n  methods: {\n    async onSubmit() {\n      this.v$.$validate();\n      if (!this.v$.$error) {\n        this.loader = true;\n        try {\n          this.message = \"\";\n          const response = await authService.assignRole(this.form);\n          this.message = response;\n\n          this.v$.form.$reset();\n          this.form = {\n            user: \"\",\n            head_user: \"\",\n            role_id: 0,\n          };\n\n          setTimeout(() => {\n            this.message = \"\";\n          }, 1800);\n        } catch (error) {\n          this.message = \"حدث خطأ, يرجى المحاولة لاحقاً\";\n        } finally {\n          this.loader = false;\n        }\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./AssignRole.vue?vue&type=template&id=63689f20\"\nimport script from \"./AssignRole.vue?vue&type=script&lang=js\"\nexport * from \"./AssignRole.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\someO\\\\Desktop\\\\vue\\\\osboha2022\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["AuthService","username","password","response","api","data","accessToken","UserInfo","date","error","console","log","formData","logout","name","gender","email","phone","user_type","res","catch","message","token","resetData","FormData","append","handleError","class","_createElementVNode","src","_imports_0","alt","for","style","value","selected","_imports_1","_hoisted_22","_hoisted_23","_createElementBlock","_createVNode","_component_iq_card","_hoisted_2","_hoisted_3","onSubmit","$options","_hoisted_7","$setup","form","user","$model","$event","type","id","placeholder","$error","_Fragment","key","required","$invalid","_hoisted_11","head_user","_hoisted_15","role_id","_hoisted_16","_renderList","$data","role","index","_hoisted_17","_toDisplayString","_hoisted_24","disabled","_hoisted_26","greaterThanZero","setup","v$","useVuelidate","async","roles","this","loader","ambassador","leader","supervisor","advisor","consultant","admin","validations","maxValue","methods","$validate","authService","$reset","setTimeout","__exports__","render"],"sourceRoot":""}